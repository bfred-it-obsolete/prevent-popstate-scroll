"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.allow=allow;exports.prevent=prevent;exports.preventOnce=preventOnce;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _getScroll=require("get-scroll");var _onOff=require("on-off");var _oneEvent=require("one-event");var _oneEvent2=_interopRequireDefault(_oneEvent);var isPrevented=false;exports.isPrevented=isPrevented;var lastScrollPosition=undefined;function resetScroll(){console.log("resetting");window.scrollTo.apply(window,lastScrollPosition)}function waitForScroll(){console.log("waiting");lastScrollPosition=[(0,_getScroll.getScrollLeft)(),(0,_getScroll.getScrollTop)()];(0,_oneEvent2["default"])(window,"scroll",resetScroll)}function event(e){if(e===_onOff.off===isPrevented){e(window,"popstate",waitForScroll)}}function allow(){event(_onOff.off);exports.isPrevented=isPrevented=false}function prevent(){event(_onOff.on);exports.isPrevented=isPrevented=true}function preventOnce(){event(_oneEvent2["default"])}exports["default"]=function(e){return(e?prevent:allow)()};